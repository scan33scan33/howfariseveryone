<title>How Far is Everyone</title>
<h1>How Far is Everyone?</h1>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDATA2ftiYVInpV2M7GtoKm0RbAYGJZriQ"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

// Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {'packages':['table', 'map', 'corechart']});

var drawTable = function (data) {
  var table = new google.visualization.Table(document.getElementById('result'));
  table.draw(data, {showRowNumber: true});
}

var generateDistanceMatrix = function () {
  var origins = [];
  var inputs = $('.origins').find('input');
  for (var i = 0; i < inputs.length; ++i) {
    origins.push(inputs[i].value);
  }
  var dests = [];
  var inputs = $('.dests').find('input');
  for (var i = 0; i < inputs.length; ++i) {
    dests.push(inputs[i].value);
  }
  
  var callback = function(response, status) {
    var data = new google.visualization.DataTable();
    // response
  data.addColumn('string', 'Name');
  data.addColumn('number', 'Salary');
  data.addColumn('boolean', 'Full Time');
  data.addRows(5);
  data.setCell(0, 0, 'John');
  data.setCell(0, 1, 10000, '$10,000');
  data.setCell(0, 2, true);
  data.setCell(1, 0, 'Mary');
  data.setCell(1, 1, 25000, '$25,000');
  data.setCell(1, 2, true);
  data.setCell(2, 0, 'Steve');
  data.setCell(2, 1, 8000, '$8,000');
  data.setCell(2, 2, false);
  data.setCell(3, 0, 'Ellen');
  data.setCell(3, 1, 20000, '$20,000');
  data.setCell(3, 2, true);
  data.setCell(4, 0, 'Mike');
  data.setCell(4, 1, 12000, '$12,000');
  data.setCell(4, 2, false);
    drawTable(data);
  }
  var service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix(
  {
    origins: origins,
    destinations: dests,
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.METRIC,
    avoidHighways: false,
    avoidTolls: true,
  }, callback);
}

var addMoreButton = function (button) {
  button.before(button.prev().clone());
}

var addMoreOriginsButton = function() {
  addMoreButton($('#add_more_origins_button'));
}

var addMoreDestsButton = function() {
  addMoreButton($('#add_more_dests_button'));
}

</script>

<div class="origins">
<h3>Origins</h3>
<div class="input_box">
  <input type="text" value="National Taiwan University">
  <input type="text" value="Google Taiwan">
  <button id="add_more_origins_button" onclick="addMoreOriginsButton();">More...</button>
</div>
</div>

<div class="dests">
<h3>Destinations</h3>
<div class="input_box">
  <input type="text" value="National Taiwan University">
  <input type="text" value="Google Taiwan">
  <input type="text" value="Daan Forest Park">
  <button id="add_more_dests_button" onclick="addMoreDestsButton();">More...</button>
</div>
</div>
<br>
<div>
<button onclick="generateDistanceMatrix();">Compute</button>
</div>
<div id="result">
</div>

